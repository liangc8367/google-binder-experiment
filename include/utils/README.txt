copied from system/core/include/utils
liangc, 2015/11/24
